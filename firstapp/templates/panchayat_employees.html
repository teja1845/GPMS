<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panchayat Employee Main Page</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            margin: 0;
            padding: 20px;
        }
        h1 {
            text-align: center;
        }
        .accordion {
            background-color: #eee;
            border: 1px solid #ccc;
            border-radius: 5px;
            margin: 10px 0;
        }
        .accordion-header {
            padding: 10px;
            cursor: pointer;
            text-align: left;
            outline: none;
            font-size: 18px;
            transition: background-color 0.3s;
        }
        .accordion-header:hover {
            background-color: #ddd;
        }
        .accordion-content {
            display: none;
            padding: 10px;
            border-top: 1px solid #ccc;
            background-color: white;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }
        th, td {
            border: 1px solid #ccc;
            padding: 8px;
            text-align: left;
        }
        .button {
            background-color: #4CAF50;
            color: white;
            padding: 10px;
            border: none;
            cursor: pointer;
            border-radius: 5px;
            margin-top: 10px;
        }
        .button:hover {
            background-color: #45a049;
        }
        .up{
            width:25%;
            text-align:center;
        }
        .container {
            background: white;
            padding: 20px;
            border-radius: 8px;
            width: 300px;
        }

        h1 {
            font-size: 20px;
            margin-bottom: 20px;
            text-align: center;
        }

        label {
            margin-bottom: 10px;
            display: block;
            font-weight: bold;
            color: #333;
        }

        select, input[type="text"], input[type="date"], input[type="number"] {
            width: 100%;
            padding: 10px;
            margin-bottom: 20px;
            border: 1px solid #ccc;
            border-radius: 4px;
            font-size: 16px;
            transition: border-color 0.3s;
        }

        select:focus, input[type="text"]:focus, input[type="date"]:focus, input[type="number"]:focus {
            border-color: #4CAF50;
            outline: none;
        }

        .input-fields {
            display: none; /* Initially hide input fields */
        }

        .input-fields div {
            margin-bottom: 10px;
        }

        /* Button styles */
        .submit-button {
            background-color: #4CAF50;
            color: white;
            border: none;
            padding: 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            width: 100%;
            transition: background-color 0.3s;
        }

        .submit-button:hover {
            background-color: #45a049;
        }
    </style>
</head>
<body>

    <h1>Panchayat Employee Main Page</h1>

    <div class="accordion">
        <div class="accordion-header">Citizens</div>
        <div class="accordion-content">
            <div class="container">
                <label for="ctzn-attribute-select">Choose an attribute:</label>
                 <select id="ctzn-attribute-select" onchange="citizenShowInputFields()">
                     <option value="">--Select an attribute--</option>
                     <option value="dob">Date of Birth</option>
                     <option value="gender">Gender</option>
                     <option value="category">Category</option>
                     <option value="income">Income</option>
                     <option value="occupation">Occupation</option>
                 </select>
                 <div id="ctzn-input-fields" class="input-fields"></div>
                 <button class="submit-button" id="ctzn-submit-button"  onclick="submitForm()">Submit</button>
            </div>
            
            <table>
                <thead>
                    <tr>
                        <th>Sno</th>
                        <th>ID</th>
                        <th>Name</th>
                        <th>Gender</th>
                        <th>DoB</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    {% for record in citizens_record %}
                    <tr>
                        <td>{{ record.sno }}</td>
                        <td>{{ record.id }}</td>
                        <td>{{ record.name }}</td>
                        <td>{{ record.gender }}</td>
                        <td>{{ record.dob }}</td>
                        <td>
                            <button onclick="location.href='updateCitizen/?ctzn_id={{ record.id }}'" style="background-color: #4CAF50; color: white; padding: 10px; border: none; cursor: pointer; border-radius: 5px; margin-top: 10px;" >Update</button>
                        </td>
                    </tr>
                    {% endfor %}
                    <!-- Repeat for 4 more rows -->
                </tbody>
            </table>
            <button class="button" onclick="location.href='addcitizen'">Add New Citizen</button>
        </div>
    </div>

    <form id="land-search-form" method="POST" action="{% url 'panchayat_employees' %}">
        {% csrf_token %}
        <div class="accordion">
            <div class="accordion-header">Lands</div>
            <div class="accordion-content">
                <div class="container">
                    <!-- Dropdown for selecting which attribute to search by -->
                    <label for="land-attribute-select">Choose an attribute:</label>
                    <select id="land-attribute-select" name="search_attribute" onchange="landShowInputFields()">
                        <option value="">--Select an attribute--</option>
                        <option value="land-id" {% if search_params.search_land_id %}selected{% endif %}>Land ID</option>
                        <option value="owner-name" {% if search_params.search_land_owner %}selected{% endif %}>Owner Name</option>
                        <option value="type" {% if search_params.search_land_type %}selected{% endif %}>Type</option>
                    </select>
    
                    <!-- This container will hold the dynamic input field -->
                    <div id="land-input-fields" class="input-fields">
                        {% if search_params.search_land_id %}
                            <label for="land-id">Land ID:</label>
                            <input type="number" id="land-id" name="search_land_id" placeholder="Enter land ID" value="{{ search_params.search_land_id }}">
                        {% elif search_params.search_land_owner %}
                            <label for="owner-name">Owner Name:</label>
                            <input type="text" id="owner-name" name="search_land_owner" placeholder="Enter owner name" value="{{ search_params.search_land_owner }}">
                        {% elif search_params.search_land_type %}
                            <label for="type">Type:</label>
                            <input type="text" id="type" name="search_land_type" placeholder="Enter type" value="{{ search_params.search_land_type }}">
                        {% endif %}
                    </div>
    
                    <button type="submit" class="submit-button" id="land-submit-button">Submit</button>
                </div>
                
                <!-- Your table displaying land records -->
                <table>
                    <thead>
                        <tr>
                            <th>Sno</th>
                            <th>ID</th>
                            <th>Type</th>
                            <th>List of Owners</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for record in land_records %}
                        <tr>
                            <td>{{ record.sno }}</td>
                            <td>{{ record.id }}</td>
                            <td>{{ record.type }}</td>
                            <td>{{ record.list_owners }}</td>
                            <td>
                                <button onclick="location.href='updateLand/?land_id={{ record.id }}'" style="background-color: #4CAF50; color: white; padding: 10px; border: none; cursor: pointer; border-radius: 5px; margin-top: 10px;">Update</button>
                                <button onclick="location.href='previousOwners/?land_id={{ record.id }}'" style="background-color: #4CAF50; color: white; padding: 10px; border: none; cursor: pointer; border-radius: 5px; margin-top: 10px;">Previous Records</button>
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
                <button class="button" onclick="location.href='addland'">Add New Lands</button>
            </div>
        </div>
    </form>
    

    <div class="accordion">
        <div class="accordion-header">Certificates</div>
        <div class="accordion-content">
            <div class="container">
                <label for="certificate-attribute-select">Choose an attribute:</label>
                <select id="certificate-attribute-select" onchange="certificateShowInputFields()">
                    <option value="">--Select an attribute--</option>
                    <option value="name">Name</option>
                    <option value="type">Type</option>
                    <option value="issued-between">Issued Between</option>
                </select>
        
                <div id="certificate-input-fields" class="input-fields"></div>
                
                <button class="submit-button" id="certificate-submit-button" onclick="submitForm()">Submit</button>
            </div>
            <table>
                <thead>
                    <tr>
                        <th>Sno</th>
                        <th>Citizen ID</th>
                        <th>Citizen Name</th>
                        <th>Certificate ID</th>
                        <th>Certificate type</th>
                        <th>Issue Date</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    {% for record in cer_records %}
                    <tr>
                        <td>{{ record.sno }}</td>
                        <td>{{ record.c_id }}</td>
                        <td>{{ record.c_name }}</td>
                        <td>{{ record.cer_id }}</td>
                        <td>{{ record.cer_type }}</td>
                        <td>{{ record.issue_date }}</td>
                        <td><button style="background-color: #4CAF50; color: white; padding: 10px; border: none; cursor: pointer; border-radius: 5px; margin-top: 10px;">Download</button></td>
                    </tr>
                    {% endfor %}
                    <!-- Repeat for 4 more rows -->
                </tbody>
            </table>
            <button class="button" onclick="location.href='issuecertificate'">Issue Cerificate</button>
        </div>
    </div>

    <div class="accordion">
        <div class="accordion-header">Tax Dues</div>
        <div class="accordion-content">
            <div class="container">
                <label for="due-attribute-select">Choose an attribute:</label>
                <select id="due-attribute-select" onchange="dueShowInputFields()">
                    <option value="">--Select an attribute--</option>
                    <option value="type">Type</option>
                    <option value="name">Name</option>
                    <option value="due-amount">Due Amount</option>
                </select>
        
                <div id="due-input-fields" class="input-fields"></div>
                
                <button class="submit-button" id="due-submit-button" onclick="submitForm()">Submit</button>
            </div>
            <table>
                <thead>
                    <tr>
                        <th>Sno</th>
                        <th>TAX ID</th>
                        <th>Citizen Name</th>
                        <th>Tax Type</th>
                        <th>Total Amount</th>
                        <th>Due Amount</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    {% for record in tax_records %}
                    <tr>
                        <td>{{ record.sno }}</td>
                        <td>{{ record.tax_id }}</td>
                        <td>{{ record.name }}</td>
                        <td>{{ record.tax_type }}</td>
                        <td>{{ record.total_amount }}</td>
                        <td>{{ record.due }}</td>
                        <td>
                            {% if record.due == 0 %}
                                <button style="background-color: #4CAF50; color: white; padding: 10px; border: none; cursor: pointer; border-radius: 5px; margin-top: 10px;">Download</button>
                            {% else %}
                                <button onclick = "location.href ='citizens/paymentPage/?tax_id={{ record.tax_id }}'";  style="background-color: red; color: white; padding: 10px; border: none; cursor: pointer; border-radius: 5px; margin-top: 10px;">Pay</button>
                            {% endif %}
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
            <div class="button up">
                <a href="{% url 'update_all_taxes' %}" style=" color: white; border: none; cursor: pointer; border-radius: 5px; text-decoration: none;margin:20px;">
                    Update Taxes
                 </a>
            </div>
            
        </div>
    </div>

    <div class="accordion">
        <div class="accordion-header">Scheme Enrollment</div>
        <div class="accordion-content">
            <div class="container">
                <label for="scheme-attribute-select">Choose an attribute:</label>
                <select id="scheme-attribute-select" onchange="schemeShowInputFields()">
                    <option value="">--Select an attribute--</option>
                    <option value="member-name">Member Name</option>
                    <option value="scheme-name">Scheme Name</option>
                </select>
        
                <div id="scheme-input-fields" class="input-fields"></div>
                
                <button class="submit-button" id="scheme-submit-button" onclick="submitForm()">Submit</button>
            </div>
            <table>
                <thead>
                    <tr>
                        <th>Sno</th>
                        <th>Scheme ID</th>
                        <th>Scheme Name</th>
                        <th>Members </th>
                    </tr>
                </thead>
                <tbody>
                    {% for record in sch_records %}
                    <tr>
                        <td>{{ record.sno }}</td>
                        <td>{{ record.sch_id }}</td>
                        <td>{{ record.sch_name }}</td>
                        <td>{{ record.members }}</td>
                    </tr>
                    {% endfor %}
                    <!-- Repeat for 4 more rows -->
                </tbody>
            </table>
            <button class="button" onclick="location.href='enrolltoschemes'">Enroll a person to scheme</button>
            <div class="button up">
                <a href="{% url 'enroll_eligible_members' %}" style=" color: white; border: none; cursor: pointer; border-radius: 5px; text-decoration: none;margin:20px;">
                    Enroll Eligible Citizens
                 </a>
            </div>
            
        </div>
    </div>

    <div class="accordion">
        <div class="accordion-header">Welfare Schemes</div>
        <div class="accordion-content">
            <table>
                <thead>
                    <tr>
                        <th>Sno</th>
                        <th>Scheme ID</th>
                        <th>Scheme Name</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    {% for record in wel_records %}
                    <tr>
                        <td>{{ record.sno }}</td>
                        <td>{{ record.wel_id }}</td>
                        <td>{{ record.wel_name }}</td>
                        <td style="display: flex; gap: 10px; align-items: center;">

                            <button onclick="location.href='viewscheme/?wel_id={{ record.wel_id }}'" 
                                    style="background-color: #4CAF50; color: white; padding: 10px; border: none; 
                                           cursor: pointer; border-radius: 5px;">
                                View Scheme
                            </button>

                            <a href="{% url 'delete_scheme' record.wel_id %}" 
                               style="background-color: rgb(248, 5, 5); color: white; padding: 10px; border: none; 
                                      cursor: pointer; border-radius: 5px; text-decoration: none;">
                                Delete
                            </a>
                        
                            
                        </td>                        
                    </tr>
                    {% endfor %}
                    <!-- Repeat for 4 more rows -->
                </tbody>
            </table>
            <button class="button" onclick="location.href='addschemes'">Add Scheme</button>
            
        </div>
    </div>

    <div class="accordion">
        <div class="accordion-header">Assets</div>
        <div class="accordion-content">
            <table>
                <thead>
                    <tr>
                        <th>sno</th>
                        <th>Asset ID</th>
                        <th>Asset Name</th>
                        <th>Location</th>
                        <th>Expenditure</th>
                        <th>Status</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    {% for record in assets_records %}
                    <tr>
                        <td>{{ record.sno }}</td>
                        <td>{{ record.ast_id }}</td>
                        <td>{{ record.ast_name }}</td>
                        <td>{{ record.loc }}</td>
                        <td>{{ record.exp }}</td>
                        <td>{{ record.stat }}</td>
                        <td style="display: flex; flex-direction: column; gap: 10px;">
                            <button onclick="location.href='edit_asset/?asset_id={{ record.ast_id }}'"
                                    style="background-color: #4CAF50; color: white; padding: 10px; border: none; cursor: pointer; border-radius: 5px;">
                                Edit Expenditure
                            </button>

                            <a href="{% url 'delete_asset' record.ast_id %}" 
                                style="background-color: rgb(248, 5, 5); color: white; padding: 10px; border: none; cursor: pointer; border-radius: 4px; text-decoration: none;text-align:center;">
                                Delete
                            </a>

                        </td>
                    </tr>
                    {% endfor %}
                    <!-- Repeat for 4 more rows -->
                </tbody>
            </table>
            <button class="button" onclick="location.href='addassets'">Add Asset</button>
        </div>
    </div>

    <div class="accordion">
        <div class="accordion-header">Households</div>
        <div class="accordion-content">
            <table>
                <thead>
                    <tr>
                        <th>Sno</th>
                        <th>Household ID</th>
                        <th>Address</th>
                        <th>Members</th>
                    </tr>
                </thead>
                <tbody>
                    {% for record in house_records %}
                    <tr>
                        <td>{{ record.sno }}</td>
                        <td>{{ record.house_id }}</td>
                        <td>{{ record.addr }}</td>
                        <td>{{ record.members }}</td>
                    </tr>
                    {% endfor %}
                    <!-- Repeat for 4 more rows -->
                </tbody>
            </table>
            <button class="button" onclick="location.href='addhousehold'">Add Household</button>
        </div>
    </div>


    <button class="button" style="display: block; margin: 20px auto;" onclick="location.href='villagedashboard'">Village Dashboard</button>
    <button class="button" style="display: block; margin: 20px auto;" onclick="location.href='logout'">Logout</button>
    <script>
        // JavaScript for accordion functionality
        const accordions = document.querySelectorAll('.accordion-header');
        accordions.forEach(accordion => {
            accordion.addEventListener('click', function() {
                const content = this.nextElementSibling;
                content.style.display = content.style.display === 'block' ? 'none' : 'block';
            });
        });
        function citizenShowInputFields() {
            const attributeSelect = document.getElementById('ctzn-attribute-select');
            const inputFields = document.getElementById('ctzn-input-fields');
            inputFields.innerHTML = ''; // Clear previous input fields

            const selectedValue = attributeSelect.value;

            if (selectedValue === 'dob') {
                inputFields.innerHTML = `
                    <label for="from-date">From Date:</label>
                    <input type="date" id="from-date">
                    <label for="to-date">To Date:</label>
                    <input type="date" id="to-date">
                `;
            } else if (selectedValue === 'gender') {
                inputFields.innerHTML = `
                    <label for="gender">Gender:</label>
                    <input type="text" id="gender" placeholder="Enter gender">
                `;
            } else if (selectedValue === 'category') {
                inputFields.innerHTML = `
                    <label for="category">Category:</label>
                    <input type="text" id="category" placeholder="Enter category">
                `;
            } else if (selectedValue === 'income') {
                inputFields.innerHTML = `
                    <label for="min-income">Minimum Income:</label>
                    <input type="number" id="min-income" placeholder="Enter minimum income">
                    <label for="max-income">Maximum Income:</label>
                    <input type="number" id="max-income" placeholder="Enter maximum income">
                `;
            } else if (selectedValue === 'occupation') {
                inputFields.innerHTML = `
                    <label for="occupation">Occupation:</label>
                    <input type="text" id="occupation" placeholder="Enter occupation">
                `;
            }
            inputFields.style.display = inputFields.innerHTML ? 'block' : 'none';
        }
        function landShowInputFields() {
            const attributeSelect = document.getElementById('land-attribute-select');
            const inputFields = document.getElementById('land-input-fields');
            inputFields.innerHTML = ''; // Clear previous input fields

            const selectedValue = attributeSelect.value;

            if (selectedValue === 'land-id') {
                inputFields.innerHTML = `
                    <label for="land-id">Land ID:</label>
                    <input type="number" id="land-id" name="search_land_id" placeholder="Enter land ID">
                `;
            } else if (selectedValue === 'owner-name') {
                inputFields.innerHTML = `
                    <label for="owner-name">Owner Name:</label>
                    <input type="text" id="owner-name" name="search_land_owner" placeholder="Enter owner name">
                `;
            } else if (selectedValue === 'type') {
                inputFields.innerHTML = `
                    <label for="type">Type:</label>
                    <input type="text" id="type" name="search_land_type" placeholder="Enter type">
                `;
            }
        
            // Show the input fields if any are added
            inputFields.style.display = inputFields.innerHTML ? 'block' : 'none';
    }

        function certificateShowInputFields() {
            const attributeSelect = document.getElementById('certificate-attribute-select');
            const inputFields = document.getElementById('certificate-input-fields');
            inputFields.innerHTML = ''; // Clear previous input fields

            const selectedValue = attributeSelect.value;

            if (selectedValue === 'name') {
                inputFields.innerHTML = `
                    <label for="certificate-name">Name:</label>
                    <input type="text" id="certificate-name" placeholder="Enter name">
                `;
            } else if (selectedValue === 'type') {
                inputFields.innerHTML = `
                    <label for="certificate-type">Type:</label>
                    <input type="text" id="certificate-type" placeholder="Enter type">
                `;
            } else if (selectedValue === 'issued-between') {
                inputFields.innerHTML = `
                    <label for="start-date">Start Date:</label>
                    <input type="date" id="start-date">
                    <label for="end-date">End Date:</label>
                    <input type="date" id="end-date">
                `;
            }

            // Show the input fields if any are added
            inputFields.style.display = inputFields.innerHTML ? 'block' : 'none';
        }

        function dueShowInputFields() {
            const attributeSelect = document.getElementById('due-attribute-select');
            const inputFields = document.getElementById('due-input-fields');
            inputFields.innerHTML = ''; // Clear previous input fields

            const selectedValue = attributeSelect.value;

            if (selectedValue === 'type') {
                inputFields.innerHTML = `
                    <label for="due-type">Type:</label>
                    <input type="text" id="due-type" placeholder="Enter type">
                `;
            } else if (selectedValue === 'name') {
                inputFields.innerHTML = `
                    <label for="due-name">Name:</label>
                    <input type="text" id="due-name" placeholder="Enter name">
                `;
            } else if (selectedValue === 'due-amount') {
                inputFields.innerHTML = `
                    <label for="min-amount">Minimum Amount:</label>
                    <input type="number" id="min-amount" placeholder="Enter minimum amount">
                    <label for="max-amount">Maximum Amount:</label>
                    <input type="number" id="max-amount" placeholder="Enter maximum amount">
                `;
            }

            // Show the input fields if any are added
            inputFields.style.display = inputFields.innerHTML ? 'block' : 'none';
        }
        function schemeShowInputFields() {
            const attributeSelect = document.getElementById('scheme-attribute-select');
            const inputFields = document.getElementById('scheme-input-fields');
            inputFields.innerHTML = ''; // Clear previous input fields

            const selectedValue = attributeSelect.value;

            if (selectedValue === 'member-name') {
                inputFields.innerHTML = `
                    <label for="scheme-member-name">Member Name:</label>
                    <input type="text" id="scheme-member-name" placeholder="Enter member name">
                `;
            } else if (selectedValue === 'scheme-name') {
                inputFields.innerHTML = `
                    <label for="scheme-scheme-name">Scheme Name:</label>
                    <input type="text" id="scheme-scheme-name" placeholder="Enter scheme name">
                `;
            }

            // Show the input fields if any are added
            inputFields.style.display = inputFields.innerHTML ? 'block' : 'none';
        }

        function submitForm() {
            // You can add your form submission logic here
            alert("Form submitted!");
        }
    </script>

</body> 
</html>